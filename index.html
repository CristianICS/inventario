<!DOCTYPE html>
<!-- https://web.dev/learn/pwa/ -->
<!-- https://developer.android.com/develop/ui/views/layout/webapps -->
<!-- https://developer.android.com/develop/ui/views/layout/webapps/load-local-content -->
<!-- https://www.geeksforgeeks.org/build-an-android-app-with-html-css-and-javascript-in-android-studio/ -->
<html>
<head>
    <link rel="stylesheet" href="style.css">
    <script src="listado_especies.js"></script>
    <script src="sw.js"></script>
    <script src="indexeddb.js"></script>
</head>
<body>

<div class="download" onclick="downloadForm();">
    <img src="icons/download.svg">
</div>

<h1>
    Inventario
</h1>

<div class="status">
    <span class="indexeddb"></span>
    <span class="service-worker"></span>
</div>

<!-- Metadatos del inventario -->
<table class="inv box metadata">
    <tbody>
        <tr>
            <td>
                <label for="inv-date">Fecha</label><br>
                <input type="date" id="inv-date" name="date">
            </td>
            <td>
                <label for="inv-id">Parcela</label><br>
                <input type="text" id="inv-id" name="id">
            </td>
        </tr>
        <tr>
            <td>
                <label for="inv-init">Punto inicio</label><br>
                <input type="text" id="inv-init" name="punto-inicio">
            </td>
            <td>
                <label for="inv-end">Punto final</label><br>
                <input type="text" id="inv-end" name="punto-final">
            </td>
        </tr>
        <tr>
            <td colspan = 2>
                <textarea placeholder="Comentarios" id="inv-comments"></textarea>
            </td>
        </tr>
    </tbody>
</table>

<!-- Ayuda -->
<div class="help box">
    <div id="search-bar">
        <p>Buscar especie:</p>
        <p style="display:flex; align-content: center; gap: 10px;">
            <input id="searchbar" onkeyup="search()" type="text" name="search">
            <img src="icons/cross.svg" onclick="clearSearchBar()">
        </p>
        <ul id="list-holder" style="max-height: 100px; overflow: auto;">
        
        </ul>
    </div>
    <table style="border-collapse: collapse; margin-bottom: 20px; width: 100%;">
        <tr style="font-size: 0.8em;">
            <td>
                <span class="flex-td">
                    <span class="help-2cm-legend lt2cm"></span> DAP &lt; 2cm
                </span>
            </td>
            <td>
                <span class="flex-td">
                    <span class="help-2cm-legend mt2cm"></span> DAP &gt; 2cm
                </span>
            </td>
            <td>DAP = Diametro a la altura del pecho</td>
        </tr>
    </table>
</div>

<!-- Formulario -->
<div class="freeze-container">
    <table class="inv box">
        <tbody id="inventario">
        <tr>
            <th>Especie</th>
            <th>N</th>
            <th>D</th>
            <th>di</th>
            <th>dd</th>
            <th>h</th>
            <th class="lt2cm-header">DM</th>
            <th class="lt2cm-header">Dm</th>
            <th class="mt2cm-header">Rmay</th>
            <th class="mt2cm-header">Rmen</th>
            <th class="mt2cm-header">DBH</th>
        </tr>
        <tr data-rowid="1" class="inv-rows" onclick="selectRow(this)">
            <td>
                <span id="inv-esp-1" class="especie"></span>
            </td>
            <td>
                <input type="text" id="inv-n-1" name="N" onchange="writeEsp(this)" pattern="\d*">
            </td>
            <td>
                <input type="text" id="inv-d-1" name="D" pattern="\d*">
            </td>
            <td>
                <input type="text" id="inv-di-1" name="di" pattern="\d*">
            </td>
            <td>
                <input type="text" id="inv-dd-1" name="dd" pattern="\d*">
            </td>
            <td>
                <input type="text" id="inv-h-1" name="h" pattern="\d*">
            </td>
            <td class="lt2cm">
                <input type="text" id="inv-dmay-1" name="DM" pattern="\d*">
            </td>
            <td class="lt2cm">
                <input type="text" id="inv-dmen-1" name="Dm" pattern="\d*">
            </td>
            <td class="mt2cm">
                <input type="text" id="inv-rmay-1" name="Rmay" pattern="\d*">
            </td>
            <td class="mt2cm">
                <input type="text" id="inv-rmen-1" name="Rmen" pattern="\d*">
            </td>
            <td class="mt2cm">
                <input type="text" id="inv-dbh-1" name="DBH" pattern="\d*">
            </td>
        </tr>
        </tbody>
    </table>
</div>

<div class="more">
    <img src="icons/tick.svg" onclick="removeRow(this)">
    <img src="icons/save.svg" onclick="saveForm()">
    <img src="icons/plus.svg" onclick="addRow()">
</div>

<script src="fun.js"></script>
<script>
    sw.init()
</script>
</body>
</html>
